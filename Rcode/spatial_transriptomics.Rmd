# https://www.10xgenomics.com/analysis-guides/integrating-10x-visium-and-chromium-data-with-r

```{bash}
mkdir adult_mouse_brain_FFPE
mkdir adult_mouse_brain_SC

# Download reference
curl -O https://cf.10xgenomics.com/supp/spatial-exp/refdata-gex-mm10-2020-A.tar.gz

# Untar the reference
tar -xf refdata-gex-mm10-2020-A.tar.gz

# Change directory to adult_mouse_brain_FFPE
cd adult_mouse_brain_FFPE

# Download visium inputs
curl -O https://cf.10xgenomics.com/samples/spatial-exp/1.3.0/Visium_FFPE_Mouse_Brain/Visium_FFPE_Mouse_Brain_fastqs.tar
curl -O https://cf.10xgenomics.com/samples/spatial-exp/1.3.0/Visium_FFPE_Mouse_Brain/Visium_FFPE_Mouse_Brain_image.jpg
curl -O https://cf.10xgenomics.com/samples/spatial-exp/1.3.0/Visium_FFPE_Mouse_Brain/Visium_FFPE_Mouse_Brain_probe_set.csv

# Untar the FASTQs
tar -xf Visium_FFPE_Mouse_Brain_fastqs.tar

# Change directory from adult_mouse_brain_FFPE to adult_mouse_brain_SC
cd ../adult_mouse_brain_SC

# Download FASTQs
curl -O https://cf.10xgenomics.com/samples/cell-exp/7.0.0/5k_mouse_brain_CNIK_3pv3/5k_mouse_brain_CNIK_3pv3_fastqs.tar

# Untar the FASTQs
tar -xf 5k_mouse_brain_CNIK_3pv3_fastqs.tar



# Change directory to adult_mouse_brain_FFPE
cd adult_mouse_brain_FFPE

# Download these files
curl -O https://cf.10xgenomics.com/samples/spatial-exp/1.3.0/Visium_FFPE_Mouse_Brain/Visium_FFPE_Mouse_Brain_filtered_feature_bc_matrix.h5
curl -O https://cf.10xgenomics.com/samples/spatial-exp/1.3.0/Visium_FFPE_Mouse_Brain/Visium_FFPE_Mouse_Brain_spatial.tar.gz

# Untar the spatial.tar.gz file, there should be a spatial/ directory that contains the tissue_positions_list.csv file
tar -xf Visium_FFPE_Mouse_Brain_spatial.tar.gz

# Rename the feature-barcode matrix file so it is recognized by the spacexr data input function
mv Visium_FFPE_Mouse_Brain_filtered_feature_bc_matrix.h5 filtered_feature_bc_matrix.h5


cellranger count --id=5k_adult_mouse_brain_SC_RUN1 \
                 --transcriptome=/path/to/refdata-gex-mm10-2020-A \
                 --fastqs=/path/to/adult_mouse_brain_SC/5k_mouse_brain_CNIK_3pv3_fastqs
```

```{r}
# Install R packages (only need to do this once, or if you need to update packages)
install.packages("devtools")
devtools::install_github("dmcable/spacexr", build_vignettes = FALSE)
install.packages("Seurat")
install.packages("ggplot2")

# Load libraries
library(spacexr)
library(Seurat)
library(ggplot2) #for saving result plots
```